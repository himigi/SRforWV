<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RTSP play</title>

    <link rel="stylesheet" type="text/css" href="./main.css">
  </head>
  <body>
    <p>"I see you" Through </p>
    <svg class="title" viewBox="0 0 600 60">
      <text x="30%" y="50%" dy=".35em">
          Zoom Face
      </text>
  </svg>
    <button class="one">1번 사용자</button>
    <button class="active">통신시작</button>
    <canvas></canvas>


    <script src="/socket.io/socket.io.js"></script>
    <script>



      //[ ==================== rtsp를 통한 영상 데이터 받아오기 ====================]
      const img = document.createElement("img"),
        socket = io("");
      socket.on("data", function (data) {
        img.src = "data:image/Webp;base64," + data;
      });


      //[ ==================== canvas그리기 ====================]
      const canvas = document.querySelector('canvas')

      canvas.width = 1500;
      canvas.height = 1000;

      img.onload = () => {
          canvas.getContext('2d').drawImage(img, 0, 0);
      }

      //[ ==================== button ====================]
      const button = document.querySelector('.active')
      button.addEventListener('click', () => {
        socket.emit('click')
      })


      //[ ==================== One ====================]
      const link = document.location.href

      console.log(link)

      const one = document.querySelector('.one')
      one.addEventListener('click', () => {
        socket.emit('one', link)
      })

      



    </script>
  </body>
</html>
